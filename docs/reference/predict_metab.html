<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="A function in the metab_model_interface. Returns predictions (estimates) of
GPP, ER, and K600."><title>Predict metabolism from a fitted model. — predict_metab • streamMetabolizer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predict metabolism from a fitted model. — predict_metab"><meta property="og:description" content="A function in the metab_model_interface. Returns predictions (estimates) of
GPP, ER, and K600."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">streamMetabolizer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.12.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data_prep.html">Data Preparation</a>
    <a class="dropdown-item" href="../articles/get_started.html">Quickstart</a>
    <a class="dropdown-item" href="../articles/gpp_er_eqs.html">GPP and ER Equations</a>
    <a class="dropdown-item" href="../articles/installation.html">Installation</a>
    <a class="dropdown-item" href="../articles/model_structures.html">Model Structures</a>
    <a class="dropdown-item" href="../articles/models_bayes.html">Bayesian Models</a>
    <a class="dropdown-item" href="../articles/models_mle.html">MLE Models</a>
    <a class="dropdown-item" href="../articles/ode_methods.html">ODE Methods</a>
    <a class="dropdown-item" href="../articles/simulations.html">Simulations</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USGS-R/streamMetabolizer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Predict metabolism from a fitted model.</h1>
      <small class="dont-index">Source: <a href="https://github.com/USGS-R/streamMetabolizer/blob/HEAD/R/metab_model_interface.R" class="external-link"><code>R/metab_model_interface.R</code></a>, <a href="https://github.com/USGS-R/streamMetabolizer/blob/HEAD/R/metab_bayes.R" class="external-link"><code>R/metab_bayes.R</code></a>, <a href="https://github.com/USGS-R/streamMetabolizer/blob/HEAD/R/metab_model.predict_metab.R" class="external-link"><code>R/metab_model.predict_metab.R</code></a></small>
      <div class="d-none name"><code>predict_metab.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A function in the metab_model_interface. Returns predictions (estimates) of
GPP, ER, and K600.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">predict_metab</span><span class="op">(</span></span>
<span>  <span class="va">metab_model</span>,</span>
<span>  date_start <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  date_end <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  day_start <span class="op">=</span> <span class="fu"><a href="get_specs.html">get_specs</a></span><span class="op">(</span><span class="va">metab_model</span><span class="op">)</span><span class="op">$</span><span class="va">day_start</span>,</span>
<span>  day_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">day_start</span> <span class="op">+</span> <span class="fl">24</span>, <span class="fu"><a href="get_specs.html">get_specs</a></span><span class="op">(</span><span class="va">metab_model</span><span class="op">)</span><span class="op">$</span><span class="va">day_end</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  attach.units <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  use_saved <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for metab_bayes</span></span>
<span><span class="fu">predict_metab</span><span class="op">(</span></span>
<span>  <span class="va">metab_model</span>,</span>
<span>  date_start <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  date_end <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  attach.units <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for metab_model</span></span>
<span><span class="fu">predict_metab</span><span class="op">(</span></span>
<span>  <span class="va">metab_model</span>,</span>
<span>  date_start <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  date_end <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  day_start <span class="op">=</span> <span class="fu"><a href="get_specs.html">get_specs</a></span><span class="op">(</span><span class="va">metab_model</span><span class="op">)</span><span class="op">$</span><span class="va">day_start</span>,</span>
<span>  day_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">day_start</span> <span class="op">+</span> <span class="fl">24</span>, <span class="fu"><a href="get_specs.html">get_specs</a></span><span class="op">(</span><span class="va">metab_model</span><span class="op">)</span><span class="op">$</span><span class="va">day_end</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  attach.units <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  use_saved <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>metab_model</dt>
<dd><p>A metabolism model, implementing the
metab_model_interface, to use in predicting metabolism</p></dd>


<dt>date_start</dt>
<dd><p>Date or a class convertible with as.Date. The first date
(inclusive) for which to report metabolism predictions. If NA, no filtering
is done.</p></dd>


<dt>date_end</dt>
<dd><p>Date or a class convertible with as.Date. The last date
(inclusive) for which to report metabolism predictions. If NA, no filtering
is done.</p></dd>


<dt>day_start</dt>
<dd><p>start time (inclusive) of a day's data in number of hours
from the midnight that begins the date. For example, day_start=-1.5
indicates that data describing 2006-06-26 begin at 2006-06-25 22:30, or at
the first observation time that occurs after that time if day_start doesn't
fall exactly on an observation time. For daily metabolism predictions,
day_end - day_start should probably equal 24 so that each day's estimate is
representative of a 24-hour period.</p></dd>


<dt>day_end</dt>
<dd><p>end time (exclusive) of a day's data in number of hours from
the midnight that begins the date. For example, day_end=30 indicates that
data describing 2006-06-26 end at the last observation time that occurs
before 2006-06-27 06:00. For daily metabolism predictions, day_end -
day_start should probably equal 24 so that each day's estimate is
representative of a 24-hour period.</p></dd>


<dt>...</dt>
<dd><p>Other arguments passed to class-specific implementations of
<code>predict_metab</code></p></dd>


<dt>attach.units</dt>
<dd><p>(deprecated, effectively FALSE in future) logical. Should
units be attached to the output?</p></dd>


<dt>use_saved</dt>
<dd><p>logical. Is it OK to use predictions that were saved with
the model?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data.frame of daily metabolism estimates. Columns include:</p>
<p></p>
<dl><dt>GPP</dt>
<dd><p>numeric estimate of Gross Primary Production, positive when
  realistic, \(g O_2 m^{-2} d^{-1}\)</p></dd>


  <dt>ER</dt>
<dd><p>numeric estimate of Ecosystem Respiration, negative when
  realistic, \(g O_2 m^{-2} d^{-1}\)</p></dd>


  <dt>K600</dt>
<dd><p>numeric estimate of the reaeration rate \(d^{-1}\)</p></dd>
 
</dl></div>
    <div class="section level2">
    <h2 id="methods-by-class-">Methods (by class)<a class="anchor" aria-label="anchor" href="#methods-by-class-"></a></h2>
    
<ul><li><p><code>metab_bayes</code>: Pulls daily metabolism estimates out of the Stan
model results; looks for <code>GPP</code> or <code>GPP_daily</code> and for <code>ER</code>
or <code>ER_daily</code> among the <code>params_out</code> (see <code><a href="specs.html">specs</a></code>),
which means you can save just one (or both) of those sets of daily
parameters when running the Stan model. Saving fewer parameters can help
models run faster and use less RAM.</p></li>
<li><p><code>metab_model</code>: This implementation is shared by many model types</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other metab_model_interface: 
<code><a href="get_data_daily.html">get_data_daily</a>()</code>,
<code><a href="get_data.html">get_data</a>()</code>,
<code><a href="get_fitting_time.html">get_fitting_time</a>()</code>,
<code><a href="get_fit.html">get_fit</a>()</code>,
<code><a href="get_info.html">get_info</a>()</code>,
<code><a href="get_param_names.html">get_param_names</a>()</code>,
<code><a href="get_params.html">get_params</a>()</code>,
<code><a href="get_specs.html">get_specs</a>()</code>,
<code><a href="get_version.html">get_version</a>()</code>,
<code><a href="predict_DO.html">predict_DO</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="data_metab.html">data_metab</a></span><span class="op">(</span><span class="st">'3'</span>, day_start<span class="op">=</span><span class="fl">12</span>, day_end<span class="op">=</span><span class="fl">36</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mm</span> <span class="op">&lt;-</span> <span class="fu"><a href="metab_night.html">metab_night</a></span><span class="op">(</span><span class="fu"><a href="specs.html">specs</a></span><span class="op">(</span><span class="fu"><a href="mm_name.html">mm_name</a></span><span class="op">(</span><span class="st">'night'</span><span class="op">)</span><span class="op">)</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">predict_metab</span><span class="op">(</span><span class="va">mm</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         date GPP GPP.lower GPP.upper        ER  ER.lower  ER.upper msgs.fit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2012-09-18   0        NA        NA -2.122498 -2.351240 -1.893755         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2012-09-19   0        NA        NA -2.927715 -3.233801 -2.621628         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2012-09-20   0        NA        NA -2.125522 -2.305859 -1.945185         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   warnings errors</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                </span>
<span class="r-in"><span><span class="fu">predict_metab</span><span class="op">(</span><span class="va">mm</span>, date_start<span class="op">=</span><span class="fu"><a href="get_fit.html">get_fit</a></span><span class="op">(</span><span class="va">mm</span><span class="op">)</span><span class="op">$</span><span class="va">date</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         date GPP GPP.lower GPP.upper        ER  ER.lower  ER.upper msgs.fit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2012-09-19   0        NA        NA -2.927715 -3.233801 -2.621628         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2012-09-20   0        NA        NA -2.125522 -2.305859 -1.945185         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   warnings errors</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Alison P. Appling, Robert O. Hall, Maite Arroita, Charles B. Yackulic.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

